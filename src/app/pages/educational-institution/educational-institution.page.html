<ion-header>
  <ion-toolbar color="primary">
    <ion-grid>
      <ion-row>
        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" [routerLink]="['/home']">
            Inicio
          </ion-button>
        </ion-col>

        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" [routerLink]="['/community']">
            Comunidad
          </ion-button>
        </ion-col>

        <ion-col class="ion-text-center">
          <!-- Muestra "Perfil" o "Iniciar Sesión" -->
          <ion-button fill="clear" color="light" (click)="onProfileButtonClick($event)">
            {{ isLoggedIn ? 'Perfil' : 'Iniciar Sesión' }}
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<!-- Menú desplegable -->
<ion-popover [isOpen]="showPopover" (didDismiss)="showPopover = false" [event]="popoverEvent">
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item button (click)="goToProfileFromMenu()">
          <ion-label>Ir al Perfil</ion-label>
        </ion-item>
        <ion-item button (click)="logout()">
          <ion-label>Cerrar Sesión</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>


<ion-content color="light">
  <div class="page-container">
    <!-- Tarjeta de la institución -->
    <ion-card color="light" class="institution-card">
      <ion-card-content>
        <h2 class="institution-name">{{ institution?.eduname }}</h2>
        <p class="institution-address">{{ institution?.address }}</p>
      </ion-card-content>
    </ion-card>

    <!-- Lista de profesores -->
    <ion-card color="light" class="comments-card">
      <ion-card-content>
        <h3 class="comments-title">Profesores de la institución</h3>

        <div class="comment-item" *ngFor="let prof of professors">
          <div class="comment-user-right">
            <!-- Foto del profesor -->
            <img
              [src]="prof.profilepicture ? ('data:image/jpeg;base64,' + prof.profilepicture) : 'assets/default-profile.png'"
              alt="Foto profesor"
              class="student-photo"
            />

            <!-- Nombre y descripción -->
            <div class="user-info">
              <span class="prof-name">{{ prof.name }}</span>
              <p class="comment-content">{{ prof.description }}</p>
            </div>

            <!-- Botón de perfil -->
            <ion-button
              class="profile-btn"
              color="secondary"
              fill="outline"
              (click)="goToTeacherPage(prof)"
            >
              Perfil
            </ion-button>

          </div>
        </div>

      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
