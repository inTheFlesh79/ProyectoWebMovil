<ion-header>
  <ion-toolbar color="primary">
    <ion-grid>
      <ion-row>
        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" [routerLink]="['/home']">Inicio</ion-button>
        </ion-col>

        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" [routerLink]="['/community']">Comunidad</ion-button>
        </ion-col>

        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" (click)="onProfileButtonClick($event)">
            {{ isLoggedIn ? 'Perfil' : 'Iniciar Sesión' }}
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<!-- Menú perfil -->
<div class="backdrop-blur" *ngIf="showPopover" (click)="showPopover = false"></div>

<ion-popover [isOpen]="showPopover" (didDismiss)="showPopover = false" [event]="popoverEvent">
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item button (click)="goToProfileFromMenu()">
          <ion-label>Ir al Perfil</ion-label>
        </ion-item>
        <ion-item button (click)="logout()">
          <ion-label>Cerrar Sesión</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>

<!-- CONTENIDO PRINCIPAL -->
<ion-content color="tertiary">
  <ion-title class="page-title" color="primary">Somos ProfeRanking</ion-title>

  <div class="page-container">
    <div class="top-half">
      <div class="search-intro">¿Qué profesor quieres consultar hoy?</div>

      <div class="search-container">
        <ion-searchbar
          [(ngModel)]="searchQuery"
          (keydown)="onEnterPress($event)"
          placeholder="Buscar..."
          color="light"
        ></ion-searchbar>

        <ion-button color="primary" (click)="onSearch()">
          <ion-icon name="search-outline" slot="start"></ion-icon>
          <ion-label>Buscar</ion-label>
        </ion-button>

        <ion-button
          *ngIf="canAddTeacher()"
          color="primary"
          (click)="openAddTeacherPopover()"
        >
          <ion-icon name="add-circle-outline" slot="start"></ion-icon>
          <ion-label>Agregar Profesor</ion-label>
        </ion-button>
      </div>
    </div>

    <div class="bottom-half">
      <div class="about-grid">
        <ion-card class="about-card">
          <ion-card-header>
            <ion-card-title class="column-subtitle">Quiénes Somos</ion-card-title>
          </ion-card-header>
          <ion-card-content class="column-text">
            ProfeRanking es una aplicación web en donde encontrarás información acerca de diferentes
            profesores y las instituciones en donde enseñan. Aquí conocerás acerca de su metodología
            de enseñanza, el trato que tienen con sus estudiantes, y la dificultad de sus asignaturas.
          </ion-card-content>
        </ion-card>

        <ion-card class="about-card">
          <ion-card-header>
            <ion-card-title class="column-subtitle">Nuestra Misión</ion-card-title>
          </ion-card-header>
          <ion-card-content class="column-text">
            Esta aplicación fue hecha por estudiantes, para los estudiantes. La información dentro de
            esta página viene de primera fuente por parte de los estudiantes y sus experiencias con
            los profesores que calificaron. En ProfeRanking creemos en ayudar a los estudiantes a tomar
            decisiones informadas.
          </ion-card-content>
        </ion-card>

        <ion-card class="about-card">
          <ion-card-header>
            <ion-card-title class="column-subtitle">Íntegrate a la Comunidad</ion-card-title>
          </ion-card-header>
          <ion-card-content class="column-text">
            ProfeRanking no es sólo una aplicación para consultar el estilo de enseñanza de un profesor.
            Aquí hacemos comunidad. Únete a una comunidad de estudiantes en donde podrás conocer anécdotas
            y compartir las tuyas.
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </div>
</ion-content>

<!-- POPUP: Agregar Profesor -->
<div class="backdrop-blur" *ngIf="addTeacherPopoverOpen" (click)="closeAddTeacherPopover()"></div>

<div class="add-teacher-popover" *ngIf="addTeacherPopoverOpen">
  <div class="popover-content">
    <h2>Agregar Profesor</h2>

    <ion-item lines="none" class="field-item">
      <ion-label position="stacked" class="field-label">Nombre del profesor</ion-label>
      <ion-input
        [(ngModel)]="newTeacherName"
        maxlength="120"
        placeholder="Ej. Juan Pérez"
      ></ion-input>
      <div class="char-count">{{ newTeacherName.length || 0 }}/120</div>
    </ion-item>

    <ion-item lines="none" class="field-item">
      <ion-label position="stacked" class="field-label">Descripción</ion-label>
      <ion-textarea
        [(ngModel)]="newTeacherDescription"
        maxlength="500"
        placeholder="Escribe una breve descripción..."
        class="description-box"
      ></ion-textarea>
      <div class="char-count">{{ newTeacherDescription.length || 0 }}/500</div>
    </ion-item>

    <div class="popover-buttons">
      <ion-button fill="clear" color="secondary" (click)="closeAddTeacherPopover()">Cancelar</ion-button>
      <ion-button color="primary" (click)="addTeacher()">Agregar</ion-button>
    </div>
  </div>
</div>
