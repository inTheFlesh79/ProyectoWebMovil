<ion-header>
  <ion-toolbar color="primary">
    <ion-grid>
      <ion-row>
        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" [routerLink]="['/home']">Inicio</ion-button>
        </ion-col>
        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" [routerLink]="['/community']">Comunidad</ion-button>
        </ion-col>
        <ion-col class="ion-text-center">
          <ion-button fill="clear" color="light" (click)="goToProfile()">
            Perfil
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content color="light">
  <div class="page-container">

    <!-- TARJETA PERFIL USUARIO -->
    <ion-card color="light" class="profile-card">
      <ion-card-content>
        <div class="profile-container-vertical">
          <img [src]="user.photo" alt="Foto usuario" class="profile-photo" />
          <h2>{{ user.name }}</h2>
          <p class="user-role">{{ getRoleText(user.role) }}</p>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- TARJETA HISTORIAL DE COMENTARIOS -->
    <!-- HISTORIAL DE COMENTARIOS -->
<ion-card color="light" class="comments-card">
  <ion-card-content>
    <h3 class="card-title">Historial de comentarios</h3>

    <div *ngIf="paginatedComments.length > 0; else noComments">
      <div class="comment-item" *ngFor="let c of paginatedComments" (click)="goToPost(c.postId)">
        <p class="comment-content">{{ c.content }}</p>
        <div class="comment-footer">
          <span class="comment-date">{{ c.date | date:'dd/MM/yyyy' }}</span>
          <span class="comment-likes">👍 {{ c.likes }}</span>
          <span class="comment-dislikes">👎 {{ c.dislikes }}</span>
        </div>
      </div>
    </div>

    <ng-template #noComments>
      <p class="ion-text-center">No hay comentarios aún</p>
    </ng-template>

    <!-- PAGINADOR -->
    <div class="pagination" *ngIf="totalPagesComments > 1">
      <ion-button fill="clear" (click)="changeCommentsPage(currentPageComments - 1)" [disabled]="currentPageComments === 1"><</ion-button>
      <ion-button *ngFor="let p of [].constructor(totalPagesComments); let i = index"
                  [fill]="currentPageComments === i + 1 ? 'solid' : 'clear'"
                  (click)="changeCommentsPage(i + 1)">
        {{ i + 1 }}
      </ion-button>
      <ion-button fill="clear" (click)="changeCommentsPage(currentPageComments + 1)" [disabled]="currentPageComments === totalPagesComments">></ion-button>
    </div>
  </ion-card-content>
</ion-card>


<!-- HISTORIAL DE OPINIONES -->
<ion-card color="light" class="comments-card">
  <ion-card-content>
    <h3 class="card-title">Historial de opiniones</h3>

    <div *ngIf="paginatedOpinions.length > 0; else noOpinions">
      <div class="comment-item" *ngFor="let o of paginatedOpinions">
        <p class="prof-name">{{ o.teacherName }}</p>
        <p class="comment-content">{{ o.content }}</p>
        <div class="comment-footer">
          <span class="comment-date">{{ o.date | date:'dd/MM/yyyy' }}</span>
          <span class="comment-likes">👍 {{ o.likes }}</span>
          <span class="comment-dislikes">👎 {{ o.dislikes }}</span>
        </div>
      </div>
    </div>

    <ng-template #noOpinions>
      <p class="ion-text-center">No hay opiniones aún</p>
    </ng-template>

    <!-- PAGINADOR -->
    <div class="pagination" *ngIf="totalPagesOpinions > 1">
      <ion-button fill="clear" (click)="changeOpinionsPage(currentPageOpinions - 1)" [disabled]="currentPageOpinions === 1"><</ion-button>
      <ion-button *ngFor="let p of [].constructor(totalPagesOpinions); let i = index"
                  [fill]="currentPageOpinions === i + 1 ? 'solid' : 'clear'"
                  (click)="changeOpinionsPage(i + 1)">
        {{ i + 1 }}
      </ion-button>
      <ion-button fill="clear" (click)="changeOpinionsPage(currentPageOpinions + 1)" [disabled]="currentPageOpinions === totalPagesOpinions">></ion-button>
    </div>
  </ion-card-content>
</ion-card>


  </div>
</ion-content>
